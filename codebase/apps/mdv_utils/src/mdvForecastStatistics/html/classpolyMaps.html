<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>polyMaps Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>polyMaps Class Reference</h1><!-- doxytag: class="polyMaps" --><code>#include &lt;<a class="el" href="polyMaps_8hh-source.html">polyMaps.hh</a>&gt;</code>
<p>
<a href="classpolyMaps-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolyMaps.html#c3e44d770c65b67403b54543518c4abd">polyMaps</a> (string mapFilename, Mdvx::master_header_t mhdr, Mdvx::field_header_t fhdr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">ui08 *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolyMaps.html#7b33a11ec3998a9974a1ded289f0d985">getMapMask</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolyMaps.html#ae947ee11c324be237c20dede2cd8d09">printMaps</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolyMaps.html#b987f2ba683c83bad0b0b68e2788ee6e">~polyMaps</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="49f1d708f45ce50e66ad50aed2a63486"></a><!-- doxytag: member="polyMaps::polyMapNotRelevant" ref="49f1d708f45ce50e66ad50aed2a63486" args="" -->
static const ui08&nbsp;</td><td class="memItemRight" valign="bottom"><b>polyMapNotRelevant</b> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="76c59e52f6a52c5a6336d42e7b5a1a65"></a><!-- doxytag: member="polyMaps::polyMapRelevant" ref="76c59e52f6a52c5a6336d42e7b5a1a65" args="" -->
static const ui08&nbsp;</td><td class="memItemRight" valign="bottom"><b>polyMapRelevant</b> = 1</td></tr>

<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpolyMaps.html#ff429aa6185792bee4f1e8a73098d609">_isInside</a> (int ix, int iy, vector&lt; polyMaps::intPoint_t &gt; intPoints)</td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8fa3e6043df34fbc85e53babef3baae2"></a><!-- doxytag: member="polyMaps::_Maps" ref="8fa3e6043df34fbc85e53babef3baae2" args="" -->
vector&lt; indexMap_t &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>_Maps</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="bc31cc9038aab7232fcd22ada77b30f3"></a><!-- doxytag: member="polyMaps::_mapMask" ref="bc31cc9038aab7232fcd22ada77b30f3" args="" -->
ui08 *&nbsp;</td><td class="memItemRight" valign="bottom"><b>_mapMask</b></td></tr>

<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><b>indexMap_t</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><b>intPoint_t</b></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Class to generate a map mask. The general idea here is that you pass in an MDV master and field header - thereby defining a grid - and the name of an ascii map file. This map file contains a set of lat/lon polygons. For each polygon, it can be required that a grid point be inside, or outside, the polygon (this is specified in the map file).<p>
You get out a two dimensional array of ui08 (bytes) which are set to polyMaps::polyMapRelevant if the grid point has passed all the criteria (ie. it is inside the polygons it needs to be inside of, and outside the ones it needs to be outside of).<p>
If the grid point has failed one or more criteria, the byte value for that grid point is set to polyMaps::polyMapNotRelevant.<p>
The format of the map file is discussed in the param file for the app.<p>
<dl compact><dt><b>Author:</b></dt><dd>Niles Oien </dd></dl>

<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="c3e44d770c65b67403b54543518c4abd"></a><!-- doxytag: member="polyMaps::polyMaps" ref="c3e44d770c65b67403b54543518c4abd" args="(string mapFilename, Mdvx::master_header_t mhdr, Mdvx::field_header_t fhdr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">polyMaps::polyMaps           </td>
          <td>(</td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>mapFilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Mdvx::master_header_t&nbsp;</td>
          <td class="paramname"> <em>mhdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Mdvx::field_header_t&nbsp;</td>
          <td class="paramname"> <em>fhdr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The constructor. The bulk of the work is done here - the parsing of the map file and the generation of the mask bytes.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mapFilename</em>&nbsp;</td><td>path for the input ascii map file. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mhdr</em>&nbsp;</td><td>MDV master header type, for grid definition. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fhdr</em>&nbsp;</td><td>MDV field header type, for grid definition.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>No return value.</dd></dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>cope more gracefully with points outside of the MDV grid. At the moment they are simply ignored, after printing a warning to that effect.</dd></dl>
<dl compact><dt><b>Author:</b></dt><dd>Niles Oien <a href="mailto:oien@ucar.edu">oien@ucar.edu</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="b987f2ba683c83bad0b0b68e2788ee6e"></a><!-- doxytag: member="polyMaps::~polyMaps" ref="b987f2ba683c83bad0b0b68e2788ee6e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">polyMaps::~polyMaps           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destructor. Frees up memory.<p>
<dl compact><dt><b>Returns:</b></dt><dd>void, no return value.</dd></dl>
<dl compact><dt><b>Author:</b></dt><dd>Niles Oien <a href="mailto:oien@ucar.edu">oien@ucar.edu</a> </dd></dl>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="ff429aa6185792bee4f1e8a73098d609"></a><!-- doxytag: member="polyMaps::_isInside" ref="ff429aa6185792bee4f1e8a73098d609" args="(int ix, int iy, vector&lt; polyMaps::intPoint_t &gt; intPoints)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool polyMaps::_isInside           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>iy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; polyMaps::intPoint_t &gt;&nbsp;</td>
          <td class="paramname"> <em>intPoints</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Internal protected method to determine if a grid point is inside a certain polygon or outside it.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ix</em>&nbsp;</td><td>Integer X co-ordinate of point to test </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>iy</em>&nbsp;</td><td>Integer Y co-ordinate of point to test </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>intPoints</em>&nbsp;</td><td>Vector of points defining the boundary polygon.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A boolean, true if the point is inside the polygon, otherwise false.</dd></dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>This uses the routine in the euclid library to determine if the point at ix,iy is inside the polygon. This means that the vector has to be converted into an array of a similar but slightly different type prior to calling the euclid routine. It would be nice to pull that routine out of euclid and make it compatible with the types we have here to avoid that type conversion which is repeated a lot.</dd></dl>
<dl compact><dt><b>Author:</b></dt><dd>Niles Oien <a href="mailto:oien@ucar.edu">oien@ucar.edu</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="7b33a11ec3998a9974a1ded289f0d985"></a><!-- doxytag: member="polyMaps::getMapMask" ref="7b33a11ec3998a9974a1ded289f0d985" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ui08 * polyMaps::getMapMask           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Allow access to the mask bytes.<p>
<dl compact><dt><b>Returns:</b></dt><dd>Returns a pointer to the mask bytes, which are set to either polyMaps::polyMapNotRelevant or polyMaps::polyMapRelevant. Array is two dimensional, of size nx by ny as defined in field header.</dd></dl>
NULL is returned if the map file is not found.<p>
<dl compact><dt><b>Author:</b></dt><dd>Niles Oien <a href="mailto:oien@ucar.edu">oien@ucar.edu</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="ae947ee11c324be237c20dede2cd8d09"></a><!-- doxytag: member="polyMaps::printMaps" ref="ae947ee11c324be237c20dede2cd8d09" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void polyMaps::printMaps           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print the maps to stderr. Note that the lat/lon points have been translated to integer values by the time they are printed.<p>
<dl compact><dt><b>Returns:</b></dt><dd>void, no return value.</dd></dl>
<dl compact><dt><b>Author:</b></dt><dd>Niles Oien <a href="mailto:oien@ucar.edu">oien@ucar.edu</a> </dd></dl>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="polyMaps_8hh-source.html">polyMaps.hh</a><li><a class="el" href="polyMaps_8cc.html">polyMaps.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Mon Oct 9 20:11:18 2006 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
